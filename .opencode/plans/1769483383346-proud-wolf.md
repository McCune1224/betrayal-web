# Agent SKILL.md Proposals for Betrayal

## Introduction

Agent skills are reusable instruction sets—encapsulated as SKILL.md files—that help both automation agents and developers apply consistent, best-practice workflows, code patterns, and operational playbooks in a project. For a collaborative, evolving codebase like Betrayal (Go/Echo/Postgres backend, SvelteKit/Bun/Skeleton frontend, Railway deployment), well-crafted skills speed up onboarding, enforce critical practices, and empower AI to safely automate tasks.

Below is a curated set of skill proposals mapped to the project's architecture and workflow, with clear rationales for each. Each skill is designed to be loaded by OpenCode agents (or referenced by humans) when working in a relevant zone—UI, WebSocket backend/frontend, database, deployment, testing, or core game logic.

---

## Proposed Skills Table

| Skill Name               | Description                                                              | Purpose (One Sentence)                                            | Codebase Target           | Rationale                                   | Usage Notes/Metadata                   |
|-------------------------|--------------------------------------------------------------------------|-------------------------------------------------------------------|---------------------------|----------------------------------------------|----------------------------------------|
| sveltekit-ui-patterns    | Guidance for SvelteKit component/page structure, error handling, and component composition using Skeleton UI. | Standardize SvelteKit UI/page/store patterns for rapid dev and onboarding. | frontend/src/routes/, src/lib/ | Avoids fragmentation, simplifies feature dev. | audience: frontend-dev                |
| websocket-handler-go     | Step-by-step guide for implementing Go WebSocket handlers using gorilla/websocket (with learning-mode comments and lifecycle management). | Help agents/devs scaffold robust, well-documented Go WebSocket handlers. | backend/internal/handlers/ | Critical for correct multiplayer comms.      | audience: backend-dev, pattern:hub     |
| frontend-websocket-client| Blueprint for SvelteKit/WebSocket integration, with reconnect/error-UI and Svelte store pattern. | Provide a plug-and-play reference for robust frontend WS clients. | frontend/src/lib/ws.js, +page.svelte  | Ensures stable real-time UX in-room.         | audience: frontend-dev, pattern:ws-client |
| postgres-migrations      | Database migration playbook/checklist for schema changes and sqlc query maintenance. | Ensure DB migrations, sqlc type-gen, and db test habits are repeatable. | backend/internal/db/migrations/ | Prevents DB drift, speeds safe change.        | audience: backend-dev, workflow:db+sqlc  |
| sveltekit-test-playbook  | Guidance and code examples for SvelteKit component/unit/integration tests. | Ensure reliable UI code and prevent regressions through test-first habits. | frontend/tests/, src/routes/         | Hard to maintain UI quality without.         | audience: frontend-dev, pattern:test      |
| social-deduction-flow    | Enforcement of social deduction game state, role assignment, phase transitions, with best-practice Go and Svelte dialog. | Encode rules so agents/devs don’t miss workflow nuances/edges.   | backend/internal/game, frontend        | Crucial for correct core game logic.         | audience: all, workflow:game-logic       |
| error-handling-patterns  | Patterns for consistent error propagation/reporting in Go and SvelteKit, including user-facing alerts and structured logs. | Prevent silent failures/missed edge cases.                       | backend/internal/, frontend/src/routes/ | Elevates non-happy-path coverage.            | audience: all, pattern:error-handling     |
| ci-setup-railway         | Step-by-step instructions and config for CI, Railway deploys, env file use, and test/preview best practices. | Ensure fast/easy new dev setup + continuous deploys.              | project root, .env*, Railway config   | Keeps team productive, helps automate ops.   | audience: ops+dev, workflow:devops       |

---

## Example Skill (websocket-handler-go)
```yaml
---
name: websocket-handler-go
description: Step-by-step guide for implementing Go WebSocket handlers with gorilla/websocket, including channel patterns, resource cleanup, and thorough learning-mode comments.
license: MIT
compatibility: opencode
metadata:
  audience: backend-dev
  pattern: websocket-hub
---
## What I do
- Show idiomatic Go WebSocket handler scaffolding (from AGENTS.md)
- Document learn-mode comments for goroutines, channels, read/write lifecycle
- Checklist for Register/Unregister/Fan-in/Fan-out patterns
- Example integration test (mock/ws)

## When to use me
Use this when implementing or maintaining multiplayer network code, onboarding a new backend developer, or requiring clear lifecycle documentation in Go WebSocket handlers.
```

---

## Verification

- Share this plan for review with stakeholders.
- Optionally pilot one skill as a SKILL.md in .opencode/skills/ and load it via the skill tool.
- Agents and humans should be able to load skills for context in codegen, refactor, or review tasks in their respective areas.
- Confirm on real PR/task usage that agents/humans reference and benefit from these skills.